{"ast":null,"code":"import _objectSpread from \"/Users/yuanxiaoyu/Desktop/visualEditorDemo/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\n/*\n * @Author: zengjian \n * @Date: 2018-12-10 19:22:03 \n * @Last Modified by: yuanxy\n * @Last Modified time: 2018-12-18 21:51:55\n */\nimport update from 'immutability-helper';\nvar initialState = {\n  comps: [{\n    x: 0,\n    y: 0,\n    width: 100,\n    height: 100,\n    id: 1,\n    background: 'red',\n    type: 'bar'\n  }, {\n    x: 0,\n    y: 0,\n    width: 50,\n    height: 100,\n    id: 2,\n    background: 'green'\n  }, {\n    x: 200,\n    y: 200,\n    width: 110,\n    height: 100,\n    id: 3,\n    background: 'yellow'\n  }]\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'comp-add':\n      var id = state.comps.reduce(function (a, b) {\n        return a.id > b.id ? a.id : b.id;\n      }) + 1;\n      var comp = {\n        x: 0,\n        y: 0,\n        width: 80,\n        height: 80,\n        background: '#ff6600',\n        id: id,\n        type: action.payload.type\n      };\n      return update(state, {\n        comps: {\n          $push: [comp]\n        }\n      });\n\n    case 'comp-move':\n      return update(state, {\n        comps: {\n          $set: state.comps.map(function (child) {\n            if (child.id === action.payload.id) {\n              return _objectSpread({}, child, action.payload);\n            }\n\n            return child;\n          })\n        }\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/yuanxiaoyu/Desktop/visualEditorDemo/src/reducer/componentReducer.js"],"names":["update","initialState","comps","x","y","width","height","id","background","type","reducer","state","action","reduce","a","b","comp","payload","$push","$set","map","child"],"mappings":";;AAAA;;;;;;AAMA,OAAOA,MAAP,MAAmB,qBAAnB;AAGA,IAAIC,YAAY,GAAG;AACfC,EAAAA,KAAK,EAAE,CAAC;AACJC,IAAAA,CAAC,EAAE,CADC;AAEJC,IAAAA,CAAC,EAAE,CAFC;AAGJC,IAAAA,KAAK,EAAE,GAHH;AAIJC,IAAAA,MAAM,EAAE,GAJJ;AAKJC,IAAAA,EAAE,EAAE,CALA;AAMJC,IAAAA,UAAU,EAAC,KANP;AAOJC,IAAAA,IAAI,EAAC;AAPD,GAAD,EAQJ;AACCN,IAAAA,CAAC,EAAE,CADJ;AAECC,IAAAA,CAAC,EAAE,CAFJ;AAGCC,IAAAA,KAAK,EAAE,EAHR;AAICC,IAAAA,MAAM,EAAE,GAJT;AAKCC,IAAAA,EAAE,EAAE,CALL;AAMCC,IAAAA,UAAU,EAAC;AANZ,GARI,EAeL;AACEL,IAAAA,CAAC,EAAE,GADL;AAEEC,IAAAA,CAAC,EAAE,GAFL;AAGEC,IAAAA,KAAK,EAAE,GAHT;AAIEC,IAAAA,MAAM,EAAE,GAJV;AAKEC,IAAAA,EAAE,EAAE,CALN;AAMEC,IAAAA,UAAU,EAAC;AANb,GAfK;AADQ,CAAnB;;AA2BA,IAAME,OAAO,GAAG,SAAVA,OAAU,GAAkC;AAAA,MAAjCC,KAAiC,uEAAzBV,YAAyB;AAAA,MAAXW,MAAW;;AAC9C,UAAQA,MAAM,CAACH,IAAf;AACI,SAAK,UAAL;AACI,UAAMF,EAAE,GAAEI,KAAK,CAACT,KAAN,CAAYW,MAAZ,CAAmB,UAACC,CAAD,EAAGC,CAAH;AAAA,eAAOD,CAAC,CAACP,EAAF,GAAKQ,CAAC,CAACR,EAAP,GAAUO,CAAC,CAACP,EAAZ,GAAeQ,CAAC,CAACR,EAAxB;AAAA,OAAnB,IAA+C,CAAzD;AACA,UAAMS,IAAI,GAAC;AACPb,QAAAA,CAAC,EAAC,CADK;AAEPC,QAAAA,CAAC,EAAC,CAFK;AAGPC,QAAAA,KAAK,EAAC,EAHC;AAIPC,QAAAA,MAAM,EAAC,EAJA;AAKPE,QAAAA,UAAU,EAAC,SALJ;AAMPD,QAAAA,EAAE,EAACA,EANI;AAOPE,QAAAA,IAAI,EAACG,MAAM,CAACK,OAAP,CAAeR;AAPb,OAAX;AASA,aAAOT,MAAM,CAACW,KAAD,EAAO;AAChBT,QAAAA,KAAK,EAAC;AACFgB,UAAAA,KAAK,EAAC,CAACF,IAAD;AADJ;AADU,OAAP,CAAb;;AAMJ,SAAK,WAAL;AACI,aAAOhB,MAAM,CAACW,KAAD,EAAO;AAChBT,QAAAA,KAAK,EAAC;AACFiB,UAAAA,IAAI,EAACR,KAAK,CAACT,KAAN,CAAYkB,GAAZ,CAAgB,UAAAC,KAAK,EAAI;AAC1B,gBAAIA,KAAK,CAACd,EAAN,KAAaK,MAAM,CAACK,OAAP,CAAeV,EAAhC,EAAoC;AAChC,uCACOc,KADP,EAEOT,MAAM,CAACK,OAFd;AAIH;;AACD,mBAAOI,KAAP;AACH,WARI;AADH;AADU,OAAP,CAAb;;AAaJ;AACI,aAAOV,KAAP;AAjCR;AAmCH,CApCD;;AAsCA,eAAeD,OAAf","sourcesContent":["/*\n * @Author: zengjian \n * @Date: 2018-12-10 19:22:03 \n * @Last Modified by: yuanxy\n * @Last Modified time: 2018-12-18 21:51:55\n */\nimport update from 'immutability-helper';\n\n\nlet initialState = {\n    comps: [{\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 100,\n        id: 1,\n        background:'red',\n        type:'bar'\n    }, {\n        x: 0,\n        y: 0,\n        width: 50,\n        height: 100,\n        id: 2,\n        background:'green'\n    },{\n        x: 200,\n        y: 200,\n        width: 110,\n        height: 100,\n        id: 3,\n        background:'yellow'\n    }],\n\n}\n\nconst reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'comp-add':\n            const id= state.comps.reduce((a,b)=>a.id>b.id?a.id:b.id)+1\n            const comp={\n                x:0,\n                y:0,\n                width:80,\n                height:80,\n                background:'#ff6600',\n                id:id,\n                type:action.payload.type\n            }\n            return update(state,{\n                comps:{\n                    $push:[comp]\n                }\n            }) \n           \n        case 'comp-move':\n            return update(state,{\n                comps:{\n                    $set:state.comps.map(child => {\n                        if (child.id === action.payload.id) {\n                            return {\n                                ...child,\n                                ...action.payload\n                            }\n                        }\n                        return child\n                    })\n                }\n            })\n        default:\n            return state\n    }\n}\n\nexport default reducer"]},"metadata":{},"sourceType":"module"}